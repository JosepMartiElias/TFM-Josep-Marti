\documentclass{article}
\usepackage[ansinew]{inputenc}
\usepackage{lmodern}
\usepackage[T1]{fontenc}
\usepackage[spanish,activeacute]{babel}
\usepackage{mathtools}
\usepackage{graphicx}
\usepackage{float}
\usepackage[dvipsnames]{xcolor}
\usepackage{textcomp}
\definecolor{Mycolor1}{HTML}{008000}

\title{Treball Final de Màster}
\author{Josep Maria Martí }
\date{February 2017}

\begin{document}

\maketitle
\newpage
\section{Controlador: Easy Driver A3967}

Els motors pas a pas necessiten un canvi de sentit en el flux de corrent  de les bobines per aconseguir així la seqüencia desitjada per realitzar el moviment. A part d\textquotesingle això, com que els motors estan controlats per un microcontrolador Arduino UNO, s\textquotesingle ha de controlar la intensitat del corrent ja que podria fer malbé la placa. És per aquesta raó que es necessita utilitzar un controlador que es basa en dos ponts H, un per cada bobina del motor, un dispositiu que suporta el flux bidireccional de corrent inversa i permet  canviar-lo de sentit.
\\*
\\*
Un pont H es conforma de 4 interruptors connectats com a la següent figura que permet fer passar el corrent per la bobina en un sentit o en un altre en funció de quina combinació d\textquotesingle interruptors s\textquotesingle utilitza, evitant així treballar amb voltatges negatius.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.40\linewidth]{C:/Users/usuario/Documents/GitHub/TFM/PontH}
	\caption{Connexió en pont H.}
	\label{fig:ponth}
\end{figure}

El seu funcionament és simple, i funciona per parelles d\textquotesingle interruptors que poden ser transistors bipolars, jfets, mosftes o alguna combinació entre ells. Si es tanquen els interruptors A i D el corrent circula en un sentit de la bobina i si al contrari els que es tanquen són B i C el corrent circula en l\textquotesingle altre sentit. Les combinacions A i B o C i D són perilloses pel circuit ja que crearien un curtcircuit. Els díodes són de protecció, ja que l\textquotesingle efecte inductiu de les bobines podria cremar el circuit un cop desconnectat.
\\*
\\*
\subsection{Easy Driver A3967}
Per facilitar el control dels motors pas a pas utilitzats, s\textquotesingle ha decidit utilitzar dos controladors Easy Driver A3967 que facilitarà el control i la programació dels motors i actuara com etapa de potència per no sobrecarregar l\textquotesingle Arduino amb la potencia requerida pel motor.
\\*
\\*
Com ja s\textquotesingle ha explicat, els motors pas a pas funcionen amb el canvi d\textquotesingle excitació de les bobines que el conformen, i cada parell de bobines te el seu parell de cables per fer-ho. La idea principal d\textquotesingle aquest driver o controlador és facilitar la feina i encarregar-se de l\textquotesingle alimentació dels motors, permetent així a l\textquotesingle usuari controlar el motor a través de només dos pins digitals de l\textquotesingle Arduino, l\textquotesingle STEP, que defineix un pas per cada pujada del pin i el DIR, que defineix el sentit de rotació del motor. 
\\*
\\*
A la següent imatge es mostra la distribució de les diferents entrades amb les que compta el controlador:

\begin{figure}[H]
	\centering
		\includegraphics[width=1.00\textwidth]{C:/Users/usuario/Documents/GitHub/TFM/PinsA3967.eps}
	\caption{Pins del driver A3967.}
	\label{fig:PinsA3967}
\end{figure}


Els pins principals i imprescindibles són els següents:


\begin{itemize}

\item	A i B: Aquestes son les entrades dels 4 cables del motor, s\textquotesingle ha de connectar tenint en compte els dos parells de bobines diferents, una al als pins A i l\textquotesingle altre als pins B. L\textquotesingle ordre dels cables del mateix parell de bobines és indiferent.

\item GND: Hi ha tres pins amb aquest nom i són la connexió a terra necessària a qualsevol circuit electrònic.

\item STEP: Connectat a un pin digital d\textquotesingle Arduino, es l\textquotesingle encarregat de realitzar els passos del motor. A cada pujada de 0 a 5V, ordena al motor realitzar un pas. 

\item DIR: Igual que l\textquotesingle STEP, va connectat a un pin digital d\textquotesingle Arduino (0-5V) i defineix segon el seu estat (high/low) la direcció del motor.

\item M+: És l\textquotesingle entrada positiva de la font d\textquotesingle alimentació del motor i es recomana alimentar-la a un màxim de 12V. L\textquotesingle entrada negativa de la font es connecta al pin GND del costat.

\end{itemize}

La resta de pins permeten modificar el comportament del motor, però són opcionals:

\begin{itemize}

\item MS1 i MS2: Aquests pins són els encarregats del microstepping. Poden reduir l\textquotesingle angle del pas i per tant augmentar la precisió de moviment del robot ja que redueixen moviment per pas. Hi ha 4 opcions de funcionament en funció de la connexió d\textquotesingle aquests dos pins que poden ser 0V (low) o 5V (high). El pas normal o full-step s\textquotesingle aconsegueix amb la combinació low/low, el mig pas o half-step amb high/low, un quart de pas o quarter-step amb low/high i un vuitè de pas o eight-step amb high/high. Per defecte la connexió és high/high, i per tant divideix el pas per 8. 

\item Enable: És un input connectat com a low que elimina les sortides si es canvia a high.

\item Reset: És un input connectat com a high que quan es canvia a low torna el controlador a la configuració inicial. 

\item Sleep: És un input connectat com a high que minimitza el consum dels motors quan aquests no s\textquotesingle utilitzen si es canvia a low.

\item +5V: Output de 5V que es pot utilitzar per alimentar components que funcionin a baixa corrent. 

\item PDF: Aquest pin no s\textquotesingle utilitza, controla el mode de decadència del corrent de sortida.

\end{itemize}

\end{document}



